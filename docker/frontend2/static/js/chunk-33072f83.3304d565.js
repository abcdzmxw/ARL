(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33072f83"],{"82b1":function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return g}));var a=n("b775");function s(e){return Object(a["a"])({url:"/menu/pageList",method:"GET",params:e})}function r(e){return Object(a["a"])({url:"/menu/list",method:"GET",params:e})}function i(){return Object(a["a"])({url:"/menu/getAllFirstLevelMenuList",method:"GET"})}function o(e){return Object(a["a"])({url:"/menu/assignMenu/".concat(e),method:"GET"})}function c(e,t){return Object(a["a"])({url:"/menu/assignMenu/".concat(e),method:"PATCH",data:t})}function u(e){return Object(a["a"])({url:"/menu/",method:"POST",data:e})}function l(e){return Object(a["a"])({url:"/menu/",method:"PATCH",data:e})}function g(e){return Object(a["a"])({url:"/menu/",method:"DELETE",data:e})}},ad23:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={dialogDrag:!1,dialogHeight:560,labelWidth:"130",border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",viewBtn:!0,excelBtn:!1,addBtn:!0,delBtn:!0,editBtn:!0,columnBtn:!1,printBtn:!1,menuType:"text",searchMenuSpan:6,searchShow:!0,searchIndex:3,searchIcon:!0,labelSuffix:" ",column:[{label:"菜单名称",prop:"menu_name",span:12,search:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"菜单编码",prop:"menu_code",span:12,search:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"排序",prop:"sort",span:12,width:"150",rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"父菜单",prop:"parent_id",span:24,search:!1,width:"90",type:"select",viewDisplay:!1,dicData:[],props:{label:"menu_name",value:"id"},order:1},{label:"路径",prop:"click_uri",span:12,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{label:"前端路由:",prop:"route",span:12,rules:[{required:!0,message:"请填写",trigger:"blur"}]}]}},f833:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container calendar-list-container"},[n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.tableOption,data:e.list,search:e.search,"table-loading":e.listLoading,"before-open":e.beforeOpen,permission:e.permissionList},on:{"update:search":function(t){e.search=t},"on-load":e.getPage,"search-change":e.searchChange,"refresh-change":e.refreshChange,"row-update":e.handleUpdate,"row-save":e.handleSave,"row-del":e.handleDel},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},s=[],r=n("5530"),i=n("2909"),o=(n("d3b7"),n("82b1")),c=n("ad23"),u={name:"MenuList",components:{},data:function(){return{search:{},tableOption:c["a"],page:{total:0,currentPage:1,pageSize:100,ascs:[],descs:[]},paramsSearch:{},list:[],listLoading:!1,form:{},firstLevelMenuList:[]}},computed:{permissionList:function(){return{}}},watch:{},created:function(){this.getFirstLevelMenuList()},methods:{getFirstLevelMenuList:function(){var e=this;Object(o["f"])().then((function(t){var n=t.data;e.firstLevelMenuList=n}))},getPage:function(e,t){var n=this;this.listLoading=!0,Object(o["g"])(Object.assign({page:1,size:200,descs:this.page.descs,ascs:this.page.ascs},t)).then((function(e){var t=e.data,a=Object(i["a"])(t.items),s=n.$utils.toArrayTree(a,{strict:!0,parentKey:"parent_id"});console.log("result",s),n.list=s,n.page.total=t.total,n.page.currentPage=t.page,n.page.pageSize=t.size,n.listLoading=!1})).catch((function(){n.listLoading=!1}))},refreshChange:function(e){console.log("refreshChange",e),this.getPage(this.page)},searchChange:function(e,t){console.log("searchChange",e),this.page.currentPage=1,this.getPage(this.page,this.filterForm(e)),t()},beforeOpen:function(e,t){console.log(t);var n=this.tableOption.column[3];n.dicData=this.firstLevelMenuList,e()},handleDel:function(e,t){var n=this;this.$confirm("是否确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={menu_id:e.id};Object(o["d"])(t).then((function(e){200==e.code?(n.$message({showClose:!0,message:e.message,type:"success"}),n.getPage(n.page),n.getFirstLevelMenuList()):n.$message({showClose:!0,message:e.message,type:"error"})}))})).catch((function(e){console.log("err",e)}))},handleSave:function(e,t,n){var a=this,s=this,i=Object(r["a"])({},e);""===i.parent_id&&delete i.parent_id,Object(o["a"])(i).then((function(e){200==e.code?(s.$message({showClose:!0,message:e.message,type:"success"}),s.getPage(a.page),s.getFirstLevelMenuList()):(s.$message({showClose:!0,message:e.message,type:"error"}),s.getPage(a.page))})).catch((function(e){console.log("err",e)})).finally((function(){t(),n()}))},handleUpdate:function(e,t,n,a){var s=this,i=this,c=Object(r["a"])({},e);this.$utils.isNull(c.parent_id)&&delete c.parent_id,Object(o["h"])(c).then((function(e){200==e.code?(i.$message({showClose:!0,message:e.message,type:"success"}),i.getPage(s.page),i.getFirstLevelMenuList()):(i.$message({showClose:!0,message:e.message,type:"error"}),i.getPage(s.page),i.getFirstLevelMenuList())})).catch((function(e){console.log("err",e)})).finally((function(){n(),a()}))}}},l=u,g=n("2877"),d=Object(g["a"])(l,a,s,!1,null,null,null);t["default"]=d.exports}}]);